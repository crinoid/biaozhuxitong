{"version":3,"sources":["dev-server.js"],"names":[],"mappings":"AAAA;;;;AACA,QAAQ,kBAAR;;AAEA,IAAM,SAAS,QAAQ,WAAR,CAAf;AACA,IAAI,CAAC,QAAQ,GAAR,CAAY,QAAjB,EAA2B;AACzB,UAAQ,GAAR,CAAY,QAAZ,GAAuB,KAAK,KAAL,CAAW,OAAO,GAAP,CAAW,GAAX,CAAe,QAA1B,CAAvB;AACD;;AAED,IAAM,MAAM,QAAQ,KAAR,CAAZ;AACA,IAAM,OAAO,QAAQ,MAAR,CAAb;AACA,IAAM,UAAU,QAAQ,SAAR,CAAhB;AACA,IAAM,UAAU,QAAQ,SAAR,CAAhB;AACA,IAAM,kBAAkB,QAAQ,uBAAR,CAAxB;AACA,IAAM,gBAAgB,QAAQ,oBAAR,CAAtB;;AAEA;AACA,IAAM,OAAO,QAAQ,GAAR,CAAY,IAAZ,IAAoB,OAAO,GAAP,CAAW,IAA5C;AACA;AACA,IAAM,kBAAkB,CAAC,CAAC,OAAO,GAAP,CAAW,eAArC;AACA;AACA;AACA,IAAM,aAAa,OAAO,GAAP,CAAW,UAA9B;;AAEA,IAAM,MAAM,SAAZ;AACA,IAAM,WAAW,QAAQ,aAAR,CAAjB;;AAEA,IAAM,gBAAgB,QAAQ,wBAAR,EAAkC,QAAlC,EAA4C;AAChE,cAAY,cAAc,MAAd,CAAqB,UAD+B;AAEhE,SAAO;AAFyD,CAA5C,CAAtB;;AAKA,IAAM,gBAAgB,QAAQ,wBAAR,EAAkC,QAAlC,EAA4C;AAChE,OAAK,KAD2D;AAEhE,aAAW;AAFqD,CAA5C,CAAtB;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,IAAI,GAAJ,CAAQ,aAAR;;AAEA;AACA,aAAY,UAAZ,EAAwB,OAAxB,CAAgC,UAAU,OAAV,EAAmB;AACjD,MAAI,UAAU,WAAW,OAAX,CAAd;AACA,MAAI,OAAO,OAAP,KAAmB,QAAvB,EAAiC;AAC/B,cAAU,EAAE,QAAQ,OAAV,EAAV;AACD;AACD,MAAI,GAAJ,CAAQ,gBAAgB,QAAQ,MAAR,IAAkB,OAAlC,EAA2C,OAA3C,CAAR;AACD,CAND;;AAQA;AACA,IAAI,GAAJ,CAAQ,QAAQ,8BAAR,GAAR;;AAEA;AACA,IAAI,GAAJ,CAAQ,aAAR;;AAEA;AACA,IAAM,aAAa,KAAK,KAAL,CAAW,IAAX,CAAgB,OAAO,GAAP,CAAW,gBAA3B,EAA6C,OAAO,GAAP,CAAW,kBAAxD,CAAnB;AACA,IAAI,GAAJ,CAAQ,UAAR,EAAoB,QAAQ,MAAR,CAAe,UAAf,CAApB;;AAEA,IAAM,MAAM,sBAAsB,IAAlC;;AAEA,IAAI,QAAJ;AACA,IAAI,OAAJ;AACA,IAAI,eAAe,aAAY,UAAC,OAAD,EAAU,MAAV,EAAqB;AAClD,aAAW,OAAX;AACA,YAAU,MAAV;AACD,CAHkB,CAAnB;;AAKA,IAAI,MAAJ;AACA,IAAI,aAAa,QAAQ,YAAR,CAAjB;AACA,WAAW,QAAX,GAAsB,IAAtB;;AAEA,QAAQ,GAAR,CAAY,0BAAZ;AACA,cAAc,cAAd,CAA6B,YAAM;AACjC,aAAW,OAAX,CAAmB,UAAC,GAAD,EAAM,IAAN,EAAe;AAChC,QAAI,GAAJ,EAAS;AACP,cAAQ,GAAR;AACD;AACD,YAAQ,GAAR,CAAY,IAAZ,GAAmB,IAAnB;AACA,QAAI,MAAM,sBAAsB,IAAhC;AACA,YAAQ,GAAR,CAAY,oBAAoB,GAApB,GAA0B,IAAtC;AACA;AACA,QAAI,mBAAmB,QAAQ,GAAR,CAAY,QAAZ,KAAyB,SAAhD,EAA2D;AACzD,UAAI,GAAJ;AACD;AACD,aAAS,IAAI,MAAJ,CAAW,IAAX,CAAT;AACA;AACD,GAbD;AAcD,CAfD;;AAiBA,OAAO,OAAP,GAAiB;AACf,SAAO,YADQ;AAEf,SAAO,iBAAM;AACX,WAAO,KAAP;AACD;AAJc,CAAjB","file":"dev-server-compiled.js","sourcesContent":["'use strict'\nrequire('./check-versions')()\n\nconst config = require('../config')\nif (!process.env.NODE_ENV) {\n  process.env.NODE_ENV = JSON.parse(config.dev.env.NODE_ENV)\n}\n\nconst opn = require('opn')\nconst path = require('path')\nconst express = require('express')\nconst webpack = require('webpack')\nconst proxyMiddleware = require('http-proxy-middleware')\nconst webpackConfig = require('./webpack.dev.conf')\n\n// default port where dev server listens for incoming traffic\nconst port = process.env.PORT || config.dev.port\n// automatically open browser, if not set will be false\nconst autoOpenBrowser = !!config.dev.autoOpenBrowser\n// Define HTTP proxies to your custom API backend\n// https://github.com/chimurai/http-proxy-middleware\nconst proxyTable = config.dev.proxyTable\n\nconst app = express()\nconst compiler = webpack(webpackConfig)\n\nconst devMiddleware = require('webpack-dev-middleware')(compiler, {\n  publicPath: webpackConfig.output.publicPath,\n  quiet: true\n})\n\nconst hotMiddleware = require('webpack-hot-middleware')(compiler, {\n  log: false,\n  heartbeat: 2000\n})\n// force page reload when html-webpack-plugin template changes\n// currently disabled until this is resolved:\n// https://github.com/jantimon/html-webpack-plugin/issues/680\n// compiler.plugin('compilation', function (compilation) {\n//   compilation.plugin('html-webpack-plugin-after-emit', function (data, cb) {\n//     hotMiddleware.publish({ action: 'reload' })\n//     cb()\n//   })\n// })\n\n// enable hot-reload and state-preserving\n// compilation error display\napp.use(hotMiddleware)\n\n// proxy api requests\nObject.keys(proxyTable).forEach(function (context) {\n  let options = proxyTable[context]\n  if (typeof options === 'string') {\n    options = { target: options }\n  }\n  app.use(proxyMiddleware(options.filter || context, options))\n})\n\n// handle fallback for HTML5 history API\napp.use(require('connect-history-api-fallback')())\n\n// serve webpack bundle output\napp.use(devMiddleware)\n\n// serve pure static assets\nconst staticPath = path.posix.join(config.dev.assetsPublicPath, config.dev.assetsSubDirectory)\napp.use(staticPath, express.static('./static'))\n\nconst uri = 'http://localhost:' + port\n\nvar _resolve\nvar _reject\nvar readyPromise = new Promise((resolve, reject) => {\n  _resolve = resolve\n  _reject = reject\n})\n\nvar server\nvar portfinder = require('portfinder')\nportfinder.basePort = port\n\nconsole.log('> Starting dev server...')\ndevMiddleware.waitUntilValid(() => {\n  portfinder.getPort((err, port) => {\n    if (err) {\n      _reject(err)\n    }\n    process.env.PORT = port\n    var uri = 'http://localhost:' + port\n    console.log('> Listening at ' + uri + '\\n')\n    // when env is testing, don't need open it\n    if (autoOpenBrowser && process.env.NODE_ENV !== 'testing') {\n      opn(uri)\n    }\n    server = app.listen(port)\n    _resolve()\n  })\n})\n\nmodule.exports = {\n  ready: readyPromise,\n  close: () => {\n    server.close()\n  }\n}\n"]}