{"version":3,"sources":["all_files.js"],"names":[],"mappings":"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","file":"all_files-compiled.js","sourcesContent":["var AllFiles = Vue.extend({\n  template: '#allfiles',\n\n  data: function () {\n    return {\n      files: {},\n      cur_files: {},\n\n      total: 0,\n      total_page: 1, //当前分词总共多少页\n      start_page: 1,  //当前起始/终止的页数按钮(如1-10,11-20)\n      end_page: 0,\n      page_arr: [],\n      BUTTON_PER_PAGE: 10, //每页多少个页数按钮\n      ITEM_PER_PAGE: 10, //每页多少个数据\n      select_page: 1, //选择了第几页\n      is_prev: false,\n      is_next: true,\n\n    }\n  },\n\n  created: function () {\n    this.init(this.$route.params.id)\n  },\n  mounted: function () {\n    vpage.updateStyle(1)\n  },\n  components: {\n    pg: Page,\n  },\n  watch: { //默认Vue只在第一次加载初始化，watch用于检测Vue实例的数据是否发生了变化，变化后触发事件\n    '$route'(to, from){\n      //跳转的路径（to）\n      db = to.path.split(\"/\")[to.path.split(\"/\").length - 1]\n      this.init(db)\n    }\n  },\n  methods: {\n    init: function (db) {\n      var url = \"/get_files/\";\n      var _self = this;\n      $.ajax({\n        type: \"post\",\n        url: url,\n        data: {db: db},\n        async: false,\n        success: function (data) {\n          _self.files = data[\"files\"]\n          vpage.setPageCount(data['page_count'])\n          _self.ITEM_PER_PAGE = data['page_count']\n          _self.updatePageInfo()\n\n        },\n        error: function (XMLHttpRequest, textStatus, errorThrown) {\n          console.log(textStatus);\n        }\n      })\n    },\n    updatePageInfo: function () {\n      this.total = vutils.jsonLength(this.files)\n      this.total_page = Math.ceil(vutils.jsonLength(this.files) / this.ITEM_PER_PAGE)\n      this.end_page = vpage.getEndPage(this.total_page)\n      this.updateItems()\n      this.page_arr = vpage.updatePageButton()\n    },\n    selectFile: function (event) {\n      $(\"#floatLayer\").show()\n      $(\"#liadloging\").show()\n      a = event.target\n      filename = $(a).next().text()\n      var url = \"/select_file/\";\n      $.post(url, {file: filename}, function (data) {\n        app.set_router(\"segment/\", \"\", \"\")\n      })\n    },\n    deleteFile: function (event) {\n      if (!window.confirm(\"确认删除吗?\"))\n        return false\n      a = event.target\n      filename = $(a).prev().text()\n      var url = \"/delete_file/\";\n      var _self = this;\n      $.post(url, {file: filename}, function (data) {\n        _self.files = data[\"files\"]\n        _self.updatePageInfo()\n        toastr.success(\"删除成功\");\n      })\n    },\n    prevPage: function () {\n      if (this.is_prev) {\n        this.page_arr = vpage.prevPage()\n        this.is_prev = vpage.isPrevEnable(this.page_arr[0])\n        this.updatePageItems()\n        this.is_next = true\n      }\n    }\n    ,\n    nextPage: function () {\n      this.page_arr = vpage.nextPage()\n      this.is_prev = vpage.isPrevEnable(this.page_arr[0])\n      this.updatePageItems()\n    }\n    ,\n    updatePageItems(){ //翻页后更新第一页的内容\n      this.select_page = this.page_arr[0]\n      this.updateItems()\n    },\n    changePage: function (tar) {\n      this.select_page = $(tar).text()\n      vpage.changePage($(tar).text())\n      this.updateItems()\n      vpage.updateStyle(\"\")\n    },\n    updateItems: function () {\n      this.cur_files = {}\n\n      end = this.select_page * this.ITEM_PER_PAGE\n      if (end > vutils.jsonLength(this.files)) {\n        end = vutils.jsonLength(this.files)\n      }\n      j = 0\n      for (i = (this.select_page - 1) * this.ITEM_PER_PAGE; i < end; i++) {\n        this.cur_files[j] = vutils.deepCopy(this.files[i])\n        j++\n      }\n    },\n  }\n})\n"]}