{"version":3,"sources":["suggest-compiled.js"],"names":[],"mappings":"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","file":"suggest-compiled-compiled.js","sourcesContent":["import _JSON$stringify from \"babel-runtime/core-js/json/stringify\";\nimport _Object$assign from \"babel-runtime/core-js/object/assign\";\nimport _Set from \"babel-runtime/core-js/set\";\nvar Suggest = Vue.extend({\n  template: '#suggest',\n\n  data: function data() {\n    return {\n      origin_msg: [],\n      //origin_msg: \"\", //当前原文\n      suggests: [], //修改的分词标注,总体,提交用\n      //cur_suggests: [], //当前的分词\n      origin_suggests: [], //原始的分词标注,总体\n      cur_items: [], //当前的一组原文+分词标注,cur_items{\"msg\":..,\"seg\":...}\n      allsuggests: null, //所有标注,标注名:颜色\n      edit_index: \"\", //编辑过的index\n      cur: \"\", //当前选择的分词\n      source: [], //标注来源\n      cur_source: [],\n      save: 0, //选择了当前诊断的所有标注,可以保存(save=1),\n      cur_index: 0,\n      total: 0,\n\n      total_page: 1, //当前分词总共多少页\n      start_page: 1, //当前起始/终止的页数按钮(如1-10,11-20)\n      page_arr: [],\n      end_page: 0,\n      BUTTON_PER_PAGE: 10, //每页多少个页数按钮\n      ITEM_PER_PAGE: 20, //每页多少个分词\n      select_page: 1, //选择了第几页\n      is_prev: false,\n      is_next: true\n    };\n  },\n\n  created: function created() {},\n  mounted: function mounted() {\n    this.getData();\n    vpage.updateStyle(1);\n  },\n  watch: {\n    //默认Vue只在第一次加载初始化，watch用于检测Vue实例的数据是否发生了变化，变化后触发事件\n    '$route': function $route(to, from) {\n      db = to.path.split(\"/\")[to.path.split(\"/\").length - 1];\n      this.init(db);\n    }\n  },\n  components: {\n    pg: Page\n  },\n  methods: {\n    //更新标注类型\n    init: function init(db) {\n      var _self = this;\n      $.ajax({\n        type: \"post\",\n        url: \"/update_suggests/\",\n        async: false,\n        data: { db: db },\n        success: function success(data) {\n          _self.allsuggests = data['all'];\n        }\n      });\n    },\n    getData: function getData() {\n      var url = \"/send_suggest/\";\n      var _self = this;\n\n      $(\"#floatLayer\").show();\n      $(\"#liadloging\").show();\n\n      // var timeout = setTimeout(function () {\n      //     alert(\"连接超时\")\n      //   },\n      //   5000 //超时时间\n      // );\n      //jquery版写法,还有vue-resource版\n      $.ajax({\n        type: \"post\",\n        url: url,\n        data: {\n          db: this.$route.params.id,\n          new_cuts: localStorage.getItem(\"new_cuts\"),\n          edit_index: localStorage.getItem(\"edit_index\"),\n          origin: localStorage.getItem(\"msg\")\n        },\n        async: false,\n        success: function success(data) {\n\n          // if (timeout) { //清除定时器\n          //   clearTimeout(timeout);\n          //   timeout = null;\n          // }\n          if (data == \"\") {\n            //alert(\"请添加分词!\")\n            //window.location.href = \"/\"\n          }\n\n          _self.allsuggests = data['all'];\n\n          for (m in data['mark']) {\n            _self.total += 1;\n            d = data['mark'][m]; //m=分词,d=每个诊断,包含多个分词\n            //console.log(d)\n            tmp = {};\n            tmp2 = {}; //for origin_suggests\n            combined_msg = \"\";\n            for (v in d) {\n              combined_msg += d[v][0];\n              var color = _self.allsuggests[d[v][1]];\n              //e.g.\"高血压\"={}\n              var text_color = \"#000\";\n              if (d[v][1] == \"未知\" || d[v][1] == \"其他\") {\n                text_color = \"#F00\";\n              }\n              tmp[d[v][0]] = { \"items\": [d[v][1]], \"color\": color, \"selected\": d[v][1], \"text_color\": text_color };\n              tmp2[d[v][0]] = { \"items\": [d[v][1]], \"color\": color, \"selected\": d[v][1], \"text_color\": text_color };\n            }\n            _self.suggests.push(tmp);\n            _self.origin_suggests.push(tmp2);\n            _self.origin_msg.push(combined_msg);\n          }\n          _self.cur_suggests = _self.suggests[0];\n\n          _self.source = data[\"source\"];\n          _self.cur_source = data[\"source\"];\n\n          _self.edit_index = new _Set();\n\n          _self.total = vutils.jsonLength(_self.origin_suggests);\n          _self.total_page = Math.ceil(vutils.jsonLength(_self.origin_suggests) / _self.ITEM_PER_PAGE);\n          _self.end_page = vpage.getEndPage(_self.total_page);\n\n          _self.page_arr = vpage.updatePageButton();\n          //添加原文\n\n          _self.updateItems();\n\n          $(\"#floatLayer\").hide();\n          $(\"#liadloging\").hide();\n        }\n      });\n    },\n    selectMark: function selectMark(event) {\n      //点击分词\n\n      $(\"div[name='cut-div']\").each(function (i) {\n        $(this).css(\"border\", \"1px solid #222\");\n      });\n\n      a = event.target;\n      this.cur_index = parseInt($(a).parent().parent().attr(\"id\")) + (this.select_page - 1) * this.ITEM_PER_PAGE;\n      par = $(a).parent(\".cut-to-mark\");\n      par.css(\"border\", \"2px solid red\");\n      this.cur = $.trim($(par.children()[0]).text());\n    },\n    selectItem: function selectItem(event) {\n      //选择标注,添加到分词上\n      a = event.target;\n      if ($(a).text() == \"\") {\n        a = $(a).next();\n      }\n      cur_suggests = this.cur_items[this.cur_index % this.ITEM_PER_PAGE][\"sug\"];\n\n      var color = this.allsuggests[$(a).text().trim()];\n      Vue.set(cur_suggests[this.cur], \"color\", color);\n      Vue.set(cur_suggests[this.cur], \"selected\", $(a).text().trim());\n\n      this.cur_items[this.cur_index][\"sug\"] = cur_suggests;\n      //数组/字典需要加上这句更新视图\n      this.cur_items = _Object$assign({}, this.cur_items);\n\n      this.edit_index.add(this.cur);\n    },\n    prevPage: function prevPage() {\n      if (this.is_prev) {\n        this.page_arr = vpage.prevPage();\n        this.is_prev = vpage.isPrevEnable(this.page_arr[0]);\n        this.updatePageItems();\n        this.is_next = true;\n      }\n    },\n\n    nextPage: function nextPage() {\n      this.page_arr = vpage.nextPage();\n      this.is_prev = vpage.isPrevEnable(this.page_arr[0]);\n      this.updatePageItems();\n    },\n\n    updatePageItems: function updatePageItems() {\n      //翻页后更新第一页的内容\n      this.select_page = this.page_arr[0];\n      this.updateItems(this.items_by_sug[this.cur_sug]);\n    },\n\n    changePage: function changePage(tar) {\n      this.select_page = $(tar).text();\n      vpage.changePage($(tar).text());\n      this.updateItems();\n      vpage.updateStyle(\"\");\n    },\n    updateItems: function updateItems() {\n\n      this.cur_items = {};\n\n      end = this.select_page * this.ITEM_PER_PAGE;\n      if (end > vutils.jsonLength(this.suggests)) {\n        end = vutils.jsonLength(this.suggests);\n      }\n      dic_index = 0;\n      for (i = (this.select_page - 1) * this.ITEM_PER_PAGE; i < end; i++) {\n        dic = {};\n        dic[\"msg\"] = this.origin_msg[i];\n        dic[\"sug\"] = this.suggests[i];\n        this.cur_items[dic_index] = dic;\n        dic_index++;\n      }\n    },\n\n    reset: function reset(event) {\n      a = event.target;\n      this.cur_index = parseInt($(a).attr(\"id\")) + (this.select_page - 1) * this.ITEM_PER_PAGE;\n\n      //遍历诊断的每一个分词\n      d = this.cur_items[this.cur_index][\"sug\"]; //分词:标注&颜色\n      //console.log(d) //单个分词\n      for (k in d) {\n        //console.log(k)\n        color1 = this.origin_suggests[this.cur_index][k][\"color\"];\n\n        this.cur_items[this.cur_index][\"sug\"][k][\"color\"] = color1;\n        var selected = this.origin_suggests[this.cur_index][k][\"selected\"];\n        this.cur_items[this.cur_index][\"sug\"][k][\"selected\"] = selected;\n      }\n\n      this.cur_items = vutils.deepCopy(this.cur_items);\n    },\n    saveSuggestion: function saveSuggestion() {\n      this.select_page * this.ITEM_PER_PAGE < this.total ? end = this.select_page * this.ITEM_PER_PAGE : end = this.total;\n\n      var j = 0;\n      for (i = (this.select_page - 1) * this.ITEM_PER_PAGE; i < end; i++) {\n        this.suggests[i] = this.cur_items[j][\"sug\"];\n        this.edit_index.add(i);\n        //this.changed_index.add(i)\n        j++;\n      }\n      toastr.success(\"保存成功\");\n    },\n    submitSuggestion: function submitSuggestion() {\n      new_suggests = {};\n      for (i in this.cur_items) {\n        tmp = {};\n        source = \"\"; //带有分词标记的术语原文\n        for (j in this.cur_items[i][\"sug\"]) {\n          //this.cur_items[i][\"sug\"][j]:一条诊断的分词+标注\n          source += j + \"/\";\n          tmp[j] = this.cur_items[i][\"sug\"][j][\"selected\"];\n        }\n        new_suggests[source] = tmp;\n      }\n      //console.log(origin)\n      //console.log(new_suggests)\n      //console.log(this.origin_msg)\n\n      //localStorage.setItem(\"success\", 1)\n      var url = \"/save_suggest/\";\n      $.post(url, { marks: _JSON$stringify(new_suggests) }, function (data) {\n\n        app.set_router('/', '');\n      });\n    },\n    is_contain: function is_contain(a, b) {\n      // console.log(a, b)\n      return a.indexOf(b);\n    }\n\n  }\n\n});\n\n//# sourceMappingURL=suggest-compiled.js.map"]}