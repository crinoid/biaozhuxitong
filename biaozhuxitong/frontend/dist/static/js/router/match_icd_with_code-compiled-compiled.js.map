{"version":3,"sources":["match_icd_with_code-compiled.js"],"names":[],"mappings":"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","file":"match_icd_with_code-compiled-compiled.js","sourcesContent":["import _JSON$stringify from 'babel-runtime/core-js/json/stringify';\nvar MatchICDCode = Vue.extend({\n  template: '#match_with_code',\n  props: ['id'],\n\n  data: function data() {\n    return {\n      icds: \"\",\n      source_list: {},\n      ischeck: {} //用于checkbox的v-model，是否选中\n    };\n  },\n  beforeMount: function beforeMount() {\n    this.init(this.$route.params.id);\n  },\n  watch: {\n    //默认Vue只在第一次加载初始化，watch用于检测Vue实例的数据是否发生了变化，变化后触发事件\n    '$route': function $route(to, from) {\n      //跳转的路径（to）\n      db = to.path.split(\"/\")[to.path.split(\"/\").length - 1];\n      this.init(db);\n    }\n  },\n  components: {\n    pg: Page\n  },\n  methods: {\n    init: function init(db) {\n      $(\"#icdname\").val(\"\");\n      $(\"#code\").val(\"\");\n      var _self = this;\n      $.ajax({\n        type: \"post\",\n        url: \"/load_source/\",\n        data: { db: db },\n        success: function success(data) {\n          _self.source_list = data[\"source\"];\n          _self.ischeck = data[\"ischeck\"];\n        }\n      });\n    },\n    match: function match() {\n      icd = $(this.$refs.icd).val().trim();\n      code = $(this.$refs.code).val().trim();\n\n      source_list = [];\n      for (k in this.ischeck) {\n        if (this.ischeck[k]) {\n          source_list.push(k);\n        }\n      }\n      if (source_list) {\n        if (this.check_icd(code, this.$route.params.id)) {\n          var _self = this;\n          $.ajax({\n            type: \"post\",\n            url: \"/match_icd_with_code/\",\n            data: { icd: icd, code: code, source_list: _JSON$stringify(source_list), db: _self.$route.params.id },\n            success: function success(data) {\n              if (icd != \"\") _self.icds = data[icd]; //list:[icd,code,ratio,match_index]*n\n              else _self.icds = data;\n            }\n          });\n        } else {\n          document.getElementById('code').focus();\n          // $(this.$refs.code).focus\n          toastr.error(\"编码格式错误\");\n        }\n      } else {\n        toastr.error(\"请选择术语集来源\");\n      }\n    },\n    get_source: function get_source(arr) {\n      if (arr.length == 3) return arr[2];else return arr[3];\n    },\n    has_element: function has_element(arr, b) {\n      return vutils.has_element(arr[arr.length - 1], b);\n    },\n    get_index: function get_index(index) {\n      return index + 1;\n    },\n    check_icd: function check_icd(code, type) {\n      if (type == \"zhenduan\") {\n        return this.check_icd_zhenduan(code);\n      } else if (type == \"shoushu\") {\n        return this.check_icd_shoushu(code);\n      }\n    },\n    check_icd_zhenduan: function check_icd_zhenduan(code) {\n      var reg = /^[A-Za-z][0-9][0-9]$/;\n      if (code.length > 2 && code.length < 10) {\n        if (reg.test(code.substring(0, 3))) {\n          return true;\n        }\n      }\n      return false;\n    },\n    check_icd_shoushu: function check_icd_shoushu(code) {\n      // var reg = /^[0-9][0-9]$/;\n      // if (code.length > 1 && code.length < 10) {\n      //   if (reg.test(code.substring(0, 2))) {\n      //     return true\n      //   }\n      // }\n      // return false\n      code = code.replace(\"x\", \"\"); //有的手术带有x\n      code = code.replace(\" \", \"\"); //\n      var regPos = /^\\d+(\\.\\d+)?$/; //浮点数\n      if (regPos.test(code)) {\n        return true;\n      } else {\n        return false;\n      }\n    }\n\n  }\n});\n\n//# sourceMappingURL=match_icd_with_code-compiled.js.map"]}