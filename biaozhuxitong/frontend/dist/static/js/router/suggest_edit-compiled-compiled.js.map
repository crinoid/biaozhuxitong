{"version":3,"sources":["suggest_edit-compiled.js"],"names":[],"mappings":"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","file":"suggest_edit-compiled-compiled.js","sourcesContent":["import _JSON$stringify from 'babel-runtime/core-js/json/stringify';\nvar SuggestEdit = Vue.extend({\n  template: '#suggestedit',\n\n  data: function data() {\n    return {\n      suggests: [], //标注\n      counts: [], //每个标注多少术语\n      new_adds: [], //新添加的,删除这类词不需要进入后台\n      updated_ctgs: {} //修改的标注\n    };\n  },\n\n  created: function created() {\n    this.init(this.$route.params.id);\n  },\n  watch: {\n    //默认Vue只在第一次加载初始化，watch用于检测Vue实例的数据是否发生了变化，变化后触发事件\n    '$route': function $route(to, from) {\n      //跳转的路径（to）\n      db = to.path.split(\"/\")[to.path.split(\"/\").length - 1];\n      this.init(db);\n    }\n  },\n  methods: {\n    init: function init(db) {\n      var url = \"/get_all_suggests/\";\n      var _self = this;\n\n      var timeout = setTimeout(function () {\n        alert(\"连接超时\");\n      }, 5000 //超时时间\n      );\n      //jquery版写法,还有vue-resource版\n      $.ajax({\n        type: \"post\",\n        url: url,\n        data: { db: db },\n        async: false,\n        success: function success(data) {\n          if (timeout) {\n            //清除定时器\n            clearTimeout(timeout);\n            timeout = null;\n          }\n          $(\"#floatLayer\").hide();\n          $(\"#liadloging\").hide();\n\n          _self.suggests = data['category'];\n          // _self.suggests = vutils.deepCopy(data['category'])\n          _self.counts = data['counts'];\n        }\n      });\n    },\n    add_category: function add_category() {\n      new_ctg = $(\"#ctg\").val().trim();\n      if (vutils.has_element(this.suggests, new_ctg)) {\n        toastr.warning(\"请勿添加重复标注\");\n      } else if (this.suggests.length > 11) {\n        toastr.warning(\"达到最大标注数量\");\n      } else if (new_ctg != \"\") {\n        var _self = this;\n        url = '/add_category/';\n        $.ajax({\n          type: \"post\",\n          url: url,\n          data: { newctg: new_ctg },\n          async: false,\n          success: function success(data) {\n            toastr.success(\"添加成功\");\n            _self.init(_self.$route.params.id);\n            //用$set()方法\n            //            this.suggests = data['category']\n            //this.counts = data['counts']\n            //    console.log(data)\n          }\n          // error: function (XMLHttpRequest, textStatus, errorThrown) {\n          //   console.log(textStatus);\n          // }\n        });\n      }\n    },\n    edit_category: function edit_category(id) {\n      $(\"#\" + id).removeClass(\"input-display\");\n      $(\"#\" + id).attr(\"disabled\", false);\n      $(\"#\" + id).focus();\n    },\n    delete_category: function delete_category(id) {\n      if (!window.confirm(\"确认删除?\")) return false;\n      target = $(\"#\" + id).val();\n      var _self = this;\n      $.ajax({\n        type: \"post\",\n        url: '/delete_sug_category/',\n        data: { category: target },\n        success: function success(data) {\n          _self.init(_self.$route.params.id);\n          toastr.success(\"删除成功\");\n        },\n        error: function error(XMLHttpRequest, textStatus, errorThrown) {\n          console.log(textStatus);\n        }\n      });\n    },\n    // 找出新修改的标注\n    update_option: function update_option() {\n      updated_ctg = [];\n      for (i in this.suggests) {\n        updated_ctg.push($(\"#\" + this.suggests[i]).val().trim());\n      }\n      return updated_ctg;\n    },\n\n    update_category: function update_category(id, index) {\n      $(\"#\" + id).addClass(\"input-display\");\n      $(\"#\" + id).attr(\"disabled\", true);\n\n      if ($(\"#\" + id).val().trim() == \"\") {\n        $(\"#\" + id).val(this.suggests[index]);\n      } else if ($(\"#\" + id).val().trim() != this.suggests[index]) {\n        url = '/update_sug_category/';\n        updated_ctg = this.update_option();\n        var _self = this;\n        $.ajax({\n          type: \"post\",\n          url: url,\n          data: { origin_ctg: _JSON$stringify(this.suggests), new_ctg: _JSON$stringify(updated_ctg) },\n          success: function success(data) {\n            _self.init(_self.$route.params.id);\n            toastr.success(\"保存成功\");\n          }\n        });\n      }\n    },\n    randomString: function randomString() {\n      return vutils.randomString();\n    }\n  }\n});\n\n//# sourceMappingURL=suggest_edit-compiled.js.map"]}